<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveRecord::Base</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveRecord::Base</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/home/slavo/_rvm/gems/ree-1_8_7-2010_02/gems/activerecord-3_0_0/lib/active_record/connection_adapters/sqlite3_adapter_rb.html">
                /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/sqlite3_adapter.rb
                </a>
        <br />
                <a href="../../files/home/slavo/_rvm/gems/ree-1_8_7-2010_02/gems/activerecord-3_0_0/lib/active_record/connection_adapters/abstract/connection_specification_rb.html">
                /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb
                </a>
        <br />
                <a href="../../files/home/slavo/_rvm/gems/ree-1_8_7-2010_02/gems/activerecord-3_0_0/lib/active_record/connection_adapters/mysql_adapter_rb.html">
                /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/mysql_adapter.rb
                </a>
        <br />
                <a href="../../files/home/slavo/_rvm/gems/ree-1_8_7-2010_02/gems/activerecord-3_0_0/lib/active_record/connection_adapters/postgresql_adapter_rb.html">
                /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/postgresql_adapter.rb
                </a>
        <br />
                <a href="../../files/home/slavo/_rvm/gems/ree-1_8_7-2010_02/gems/activerecord-3_0_0/lib/active_record/base_rb.html">
                /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>Active Record</h1>
<p>
Active Record objects don&#8216;t specify their <a
href="Base.html#M001547">attributes</a> directly, but rather infer them
from the table definition with which they&#8216;re linked. Adding,
removing, and changing <a href="Base.html#M001547">attributes</a> and their
type is done directly in the database. Any change is instantly reflected in
the Active Record objects. The mapping that binds a given Active Record
class to a certain database table will happen automatically in most common
cases, but can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in <a href="Base.html#M001504">table_name</a> and the
full example in <a
href="../../files/activerecord/README_rdoc.html">files/activerecord/README_rdoc.html</a>
for more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a <a
href="Base.html#M001553">hash</a> or as a block. The <a
href="Base.html#M001553">hash</a> method is especially useful when
you&#8216;re receiving the data from somewhere else, like an HTTP request.
It works like this:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;, :occupation =&gt; &quot;Code Artist&quot;)
  user.name # =&gt; &quot;David&quot;
</pre>
<p>
You can also use block initialization:
</p>
<pre>
  user = User.new do |u|
    u.name = &quot;David&quot;
    u.occupation = &quot;Code Artist&quot;
  end
</pre>
<p>
And of course you can just <a href="Base.html#M001498">create</a> a bare
object and specify the <a href="Base.html#M001547">attributes</a> after the
fact:
</p>
<pre>
  user = User.new
  user.name = &quot;David&quot;
  user.occupation = &quot;Code Artist&quot;
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or <a
href="Base.html#M001553">hash</a> representing the WHERE-part of an SQL
statement. The array form is to be used when the condition input is tainted
and requires sanitization. The string form can be used for statements that
don&#8216;t involve tainted data. The <a href="Base.html#M001553">hash</a>
form works much like the array form, except only equality and range is
possible. Examples:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def self.authenticate_unsafely(user_name, password)
      where(&quot;user_name = '#{user_name}' AND password = '#{password}'&quot;).first
    end

    def self.authenticate_safely(user_name, password)
      where(&quot;user_name = ? AND password = ?&quot;, user_name, password).first
    end

    def self.authenticate_safely_simply(user_name, password)
      where(:user_name =&gt; user_name, :password =&gt; password).first
    end
  end
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from an
HTTP request. The <tt>authenticate_safely</tt> and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8216;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8216;s done by replacing the question marks with symbols and
supplying a <a href="Base.html#M001553">hash</a> with values for the
matching symbol keys:
</p>
<pre>
  Company.where(
    &quot;id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date&quot;,
    { :id =&gt; 3, :name =&gt; &quot;37signals&quot;, :division =&gt; &quot;First&quot;, :accounting_date =&gt; '2005-01-01' }
  ).first
</pre>
<p>
Similarly, a simple <a href="Base.html#M001553">hash</a> without a
statement will generate conditions based on equality with the SQL AND
operator. For instance:
</p>
<pre>
  Student.where(:first_name =&gt; &quot;Harvey&quot;, :status =&gt; 1)
  Student.where(params[:student])
</pre>
<p>
A range may be used in the <a href="Base.html#M001553">hash</a> to use the
SQL BETWEEN operator:
</p>
<pre>
  Student.where(:grade =&gt; 9..12)
</pre>
<p>
An array may be used in the <a href="Base.html#M001553">hash</a> to use the
SQL IN operator:
</p>
<pre>
  Student.where(:grade =&gt; [9,11,12])
</pre>
<p>
When joining tables, nested hashes or keys written in the form
&#8216;table_name.column_name&#8217; can be used to qualify the table name
of a particular condition. For instance:
</p>
<pre>
  Student.joins(:schools).where(:schools =&gt; { :type =&gt; 'public' })
  Student.joins(:schools).where('schools.type' =&gt; 'public' )
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but sometimes you want to specialize this
behavior. This can be done by overwriting the default accessors (using the
same name as the attribute) and calling <tt>read_attribute(attr_name)</tt>
and <tt>write_attribute(attr_name, value)</tt> to actually change things.
</p>
<pre>
  class Song &lt; ActiveRecord::Base
    # Uses an integer of seconds to hold the length of the song

    def length=(minutes)
      write_attribute(:length, minutes.to_i * 60)
    end

    def length
      read_attribute(:length) / 60
    end
  end
</pre>
<p>
You can alternatively use <tt>self[:attribute]=(value)</tt> and
<tt>self[:attribute]</tt> instead of <tt>write_attribute(:attribute,
value)</tt> and <tt>read_attribute(:attribute)</tt>.
</p>
<h2>Attribute query methods</h2>
<p>
In addition to the basic accessors, query methods are also automatically
available on the Active Record object. Query methods allow you to test
whether an attribute value is present.
</p>
<p>
For example, an Active Record User with the <tt>name</tt> attribute has a
<tt>name?</tt> method that you can call to determine whether the user has a
name:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;)
  user.name? # =&gt; true

  anonymous = User.new(:name =&gt; &quot;&quot;)
  anonymous.name? # =&gt; false
</pre>
<h2>Accessing <a href="Base.html#M001547">attributes</a> before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course first. That can be done by
using the <tt>&lt;attribute&gt;_before_type_cast</tt> accessors that all <a
href="Base.html#M001547">attributes</a> have. For example, if your Account
model has a <tt>balance</tt> attribute, you can call
<tt>account.balance_before_type_cast</tt> or
<tt>account.id_before_type_cast</tt>.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8216;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt>,
<tt>find_last_by_</tt>, or <tt>find_all_by_</tt> and thus produces finders
like <tt>Person.find_by_user_name</tt>,
<tt>Person.find_all_by_last_name</tt>, and
<tt>Payment.find_by_transaction_id</tt>. Instead of writing
<tt>Person.where(:user_name =&gt; user_name).first</tt>, you just do
<tt>Person.find_by_user_name(user_name)</tt>. And instead of writing
<tt>Person.where(:last_name =&gt; last_name).all</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8216;s also possible to use multiple <a
href="Base.html#M001547">attributes</a> in the same find by separating them
with &quot;<em>and</em>&quot;.
</p>
<pre>
 Person.where(:user_name =&gt; user_name, :password =&gt; password).first
 Person.find_by_user_name_and_password #with dynamic finder

 Person.where(:user_name =&gt; user_name, :password =&gt; password, :gender =&gt; 'male').first
 Payment.find_by_user_name_and_password_and_gender
</pre>
<p>
It&#8216;s even possible to call these dynamic finder methods on relations
and named scopes.
</p>
<pre>
  Payment.order(&quot;created_on&quot;).find_all_by_amount(50)
  Payment.pending.find_last_by_amount(100)
</pre>
<p>
The same dynamic finder style can be used to <a
href="Base.html#M001498">create</a> the object if it doesn&#8216;t already
exist. This dynamic finder is called with <tt>find_or_create_by_</tt> and
will return the object if it already exists and otherwise creates it, then
returns it. Protected <a href="Base.html#M001547">attributes</a>
won&#8216;t be set unless they are given in a block.
</p>
<pre>
  # No 'Summer' tag exists
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.create(:name =&gt; &quot;Summer&quot;)

  # Now the 'Summer' tag does exist
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.find_by_name(&quot;Summer&quot;)

  # Now 'Bob' exist and is an 'admin'
  User.find_or_create_by_name('Bob', :age =&gt; 40) { |u| u.admin = true }
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a <a
href="Base.html#M001538">new</a> record without saving it first. Protected
<a href="Base.html#M001547">attributes</a> won&#8216;t be set unless they
are given in a block.
</p>
<pre>
  # No 'Winter' tag exists
  winter = Tag.find_or_initialize_by_name(&quot;Winter&quot;)
  winter.new_record? # true
</pre>
<p>
To find by a subset of the <a href="Base.html#M001547">attributes</a> to be
used for instantiating a <a href="Base.html#M001538">new</a> object, pass a
<a href="Base.html#M001553">hash</a> instead of a list of parameters.
</p>
<pre>
  Tag.find_or_create_by_name(:name =&gt; &quot;rails&quot;, :creator =&gt; current_user)
</pre>
<p>
That will either find an existing tag named &quot;rails&quot;, or <a
href="Base.html#M001498">create</a> a <a href="Base.html#M001538">new</a>
one while setting the user that created it.
</p>
<p>
Just like <tt>find_by_*</tt>, you can also use <tt>scoped_by_*</tt> to
retrieve data. The good thing about using this feature is that the very
first time result is returned using <tt>method_missing</tt> technique but
after that the method is declared on the class. Henceforth
<tt>method_missing</tt> will not be hit.
</p>
<pre>
 User.scoped_by_user_name('David')
</pre>
<h2>Saving arrays, hashes, and other non-mappable objects in text <a href="Base.html#M001511">columns</a></h2>
<p>
Active Record can <a href="Base.html#M001502">serialize</a> any object in
text <a href="Base.html#M001511">columns</a> using YAML. To do so, you must
specify this with a call to the class method <tt><a
href="Base.html#M001502">serialize</a></tt>. This makes it possible to
store arrays, hashes, and other non-mappable objects without doing any
additional work.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large })
  User.find(user.id).preferences # =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</pre>
<p>
You can also specify a class option as the second parameter that&#8216;ll
raise an exception if a serialized object is retrieved as a descendant of a
class not in the hierarchy.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch
</pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is named &quot;type&quot; (can be changed by
overwriting <tt><a
href="Base.html#M001506">Base.inheritance_column</a></tt>). This means that
an inheritance looking like this:
</p>
<pre>
  class Company &lt; ActiveRecord::Base; end
  class Firm &lt; Company; end
  class Client &lt; Company; end
  class PriorityClient &lt; Client; end
</pre>
<p>
When you do <tt>Firm.create(:name =&gt; &quot;37signals&quot;)</tt>, this
record will be saved in the companies table with type = &quot;Firm&quot;.
You can then fetch this row again using <tt>Company.where(:name =&gt;
&#8216;37signals&#8217;).first</tt> and it will return a Firm object.
</p>
<p>
If you don&#8216;t have a type column defined in your table, single-table
inheritance won&#8216;t be triggered. In that case, it&#8216;ll work just
like normal <a href="Base.html#M001495">subclasses</a> with no special
magic for differentiating between them or reloading the right type with
find.
</p>
<p>
Note, all the <a href="Base.html#M001547">attributes</a> for all the cases
are kept in the same table. Read more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html">www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through <a
href="Base.html#M001489">ActiveRecord::Base.establish_connection</a> and
retrieved by <a href="Base.html#M001488">ActiveRecord::Base.connection</a>.
All classes inheriting from <a href="Base.html">ActiveRecord::Base</a> will
use this <a href="Base.html#M001488">connection</a>. But you can also set a
class-specific <a href="Base.html#M001488">connection</a>. For example, if
Course is an <a href="Base.html">ActiveRecord::Base</a>, but resides in a
different database, you can just say <tt>Course.establish_connection</tt>
and Course and all of its <a href="Base.html#M001495">subclasses</a> will
use this <a href="Base.html#M001488">connection</a> instead.
</p>
<p>
This feature is implemented by keeping a <a
href="Base.html#M001488">connection</a> pool in <a
href="Base.html">ActiveRecord::Base</a> that is a Hash indexed by the
class. If a <a href="Base.html#M001488">connection</a> is requested, the <a
href="Base.html#M001492">retrieve_connection</a> method will go up the
class-hierarchy until a <a href="Base.html#M001488">connection</a> is found
in the <a href="Base.html#M001488">connection</a> pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><a href="ActiveRecordError.html">ActiveRecordError</a> - Generic error
class and superclass of all other errors raised by Active Record.

</li>
<li><a href="AdapterNotSpecified.html">AdapterNotSpecified</a> - The
configuration <a href="Base.html#M001553">hash</a> used in <tt><a
href="Base.html#M001489">establish_connection</a></tt> didn&#8216;t include
an <tt>:adapter</tt> key.

</li>
<li><a href="AdapterNotFound.html">AdapterNotFound</a> - The <tt>:adapter</tt>
key used in <tt><a href="Base.html#M001489">establish_connection</a></tt>
specified a non-existent adapter (or a bad spelling of an existing one).

</li>
<li><a href="AssociationTypeMismatch.html">AssociationTypeMismatch</a> - The
object assigned to the association wasn&#8216;t of the type specified in
the association definition.

</li>
<li><a href="SerializationTypeMismatch.html">SerializationTypeMismatch</a> -
The serialized object wasn&#8216;t of the class specified as the second
parameter.

</li>
<li><a href="ConnectionNotEstablished.html">ConnectionNotEstablished</a>+ - No
<a href="Base.html#M001488">connection</a> has been established. Use <tt><a
href="Base.html#M001489">establish_connection</a></tt> before querying.

</li>
<li><a href="RecordNotFound.html">RecordNotFound</a> - No record responded to
the <tt>find</tt> method. Either the row with the given ID doesn&#8216;t
exist or the row didn&#8216;t meet the additional restrictions. Some
<tt>find</tt> calls do not raise this exception to signal nothing was
found, please check its documentation for further details.

</li>
<li><a href="StatementInvalid.html">StatementInvalid</a> - The database server
rejected the SQL statement. The precise error is added in the message.

</li>
<li><a
href="MultiparameterAssignmentErrors.html">MultiparameterAssignmentErrors</a>
- Collection of errors that occurred during a mass assignment using the
<tt><a href="Base.html#M001546">attributes=</a></tt> method. The
<tt>errors</tt> property of this exception contains an array of <a
href="AttributeAssignmentError.html">AttributeAssignmentError</a> objects
that should be inspected to determine which <a
href="Base.html#M001547">attributes</a> triggered the errors.

</li>
<li><a href="AttributeAssignmentError.html">AttributeAssignmentError</a> - An
error occurred while doing a mass assignment through the <tt><a
href="Base.html#M001546">attributes=</a></tt> method. You can <a
href="Base.html#M001518">inspect</a> the <tt>attribute</tt> property of the
exception object to determine which attribute triggered the error.

</li>
</ul>
<p>
<b>Note</b>: The <a href="Base.html#M001547">attributes</a> listed are
class-level <a href="Base.html#M001547">attributes</a> (accessible from
both the class and instance level). So it&#8216;s possible to assign a
logger to the class through <tt>Base.logger=</tt> which will then be used
by all instances in the current object space.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001551">==</a>&nbsp;&nbsp;
      <a href="#M001519">===</a>&nbsp;&nbsp;
      <a href="#M001544">[]</a>&nbsp;&nbsp;
      <a href="#M001545">[]=</a>&nbsp;&nbsp;
      <a href="#M001521">abstract_class?</a>&nbsp;&nbsp;
      <a href="#M001533">aggregate_mapping</a>&nbsp;&nbsp;
      <a href="#M001525">arel_engine</a>&nbsp;&nbsp;
      <a href="#M001524">arel_table</a>&nbsp;&nbsp;
      <a href="#M001500">attr_readonly</a>&nbsp;&nbsp;
      <a href="#M001548">attribute_for_inspect</a>&nbsp;&nbsp;
      <a href="#M001516">attribute_method?</a>&nbsp;&nbsp;
      <a href="#M001543">attribute_names</a>&nbsp;&nbsp;
      <a href="#M001549">attribute_present?</a>&nbsp;&nbsp;
      <a href="#M001547">attributes</a>&nbsp;&nbsp;
      <a href="#M001546">attributes=</a>&nbsp;&nbsp;
      <a href="#M001520">base_class</a>&nbsp;&nbsp;
      <a href="#M001541">cache_key</a>&nbsp;&nbsp;
      <a href="#M001530">class_of_active_record_descendant</a>&nbsp;&nbsp;
      <a href="#M001561">clone_attribute_value</a>&nbsp;&nbsp;
      <a href="#M001560">clone_attributes</a>&nbsp;&nbsp;
      <a href="#M001496">colorize_logging</a>&nbsp;&nbsp;
      <a href="#M001550">column_for_attribute</a>&nbsp;&nbsp;
      <a href="#M001513">column_names</a>&nbsp;&nbsp;
      <a href="#M001511">columns</a>&nbsp;&nbsp;
      <a href="#M001512">columns_hash</a>&nbsp;&nbsp;
      <a href="#M001529">compute_type</a>&nbsp;&nbsp;
      <a href="#M001493">connected?</a>&nbsp;&nbsp;
      <a href="#M001490">connection</a>&nbsp;&nbsp;
      <a href="#M001488">connection</a>&nbsp;&nbsp;
      <a href="#M001491">connection_pool</a>&nbsp;&nbsp;
      <a href="#M001514">content_columns</a>&nbsp;&nbsp;
      <a href="#M001499">count_by_sql</a>&nbsp;&nbsp;
      <a href="#M001498">create</a>&nbsp;&nbsp;
      <a href="#M001528">default_scope</a>&nbsp;&nbsp;
      <a href="#M001517">descends_from_active_record?</a>&nbsp;&nbsp;
      <a href="#M001556">dup</a>&nbsp;&nbsp;
      <a href="#M001552">eql?</a>&nbsp;&nbsp;
      <a href="#M001489">establish_connection</a>&nbsp;&nbsp;
      <a href="#M001534">expand_hash_conditions_for_aggregates</a>&nbsp;&nbsp;
      <a href="#M001497">find_by_sql</a>&nbsp;&nbsp;
      <a href="#M001554">freeze</a>&nbsp;&nbsp;
      <a href="#M001555">frozen?</a>&nbsp;&nbsp;
      <a href="#M001542">has_attribute?</a>&nbsp;&nbsp;
      <a href="#M001553">hash</a>&nbsp;&nbsp;
      <a href="#M001506">inheritance_column</a>&nbsp;&nbsp;
      <a href="#M001539">initialize_copy</a>&nbsp;&nbsp;
      <a href="#M001518">inspect</a>&nbsp;&nbsp;
      <a href="#M001559">inspect</a>&nbsp;&nbsp;
      <a href="#M001538">new</a>&nbsp;&nbsp;
      <a href="#M001505">quoted_table_name</a>&nbsp;&nbsp;
      <a href="#M001558">readonly!</a>&nbsp;&nbsp;
      <a href="#M001557">readonly?</a>&nbsp;&nbsp;
      <a href="#M001501">readonly_attributes</a>&nbsp;&nbsp;
      <a href="#M001494">remove_connection</a>&nbsp;&nbsp;
      <a href="#M001515">reset_column_information</a>&nbsp;&nbsp;
      <a href="#M001522">respond_to?</a>&nbsp;&nbsp;
      <a href="#M001492">retrieve_connection</a>&nbsp;&nbsp;
      <a href="#M001537">sanitize_sql_array</a>&nbsp;&nbsp;
      <a href="#M001532">sanitize_sql_for_assignment</a>&nbsp;&nbsp;
      <a href="#M001531">sanitize_sql_for_conditions</a>&nbsp;&nbsp;
      <a href="#M001536">sanitize_sql_hash_for_assignment</a>&nbsp;&nbsp;
      <a href="#M001535">sanitize_sql_hash_for_conditions</a>&nbsp;&nbsp;
      <a href="#M001502">serialize</a>&nbsp;&nbsp;
      <a href="#M001503">serialized_attributes</a>&nbsp;&nbsp;
      <a href="#M001508">set_inheritance_column</a>&nbsp;&nbsp;
      <a href="#M001509">set_sequence_name</a>&nbsp;&nbsp;
      <a href="#M001507">set_table_name</a>&nbsp;&nbsp;
      <a href="#M001523">sti_name</a>&nbsp;&nbsp;
      <a href="#M001495">subclasses</a>&nbsp;&nbsp;
      <a href="#M001510">table_exists?</a>&nbsp;&nbsp;
      <a href="#M001504">table_name</a>&nbsp;&nbsp;
      <a href="#M001540">to_param</a>&nbsp;&nbsp;
      <a href="#M001527">with_exclusive_scope</a>&nbsp;&nbsp;
      <a href="#M001526">with_scope</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">



    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">colorize_logging</td>
          <td>-&gt;</td>
          <td class="context-item-value">colorize_logging=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_table_name</td>
          <td>-&gt;</td>
          <td class="context-item-value">table_name=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_inheritance_column</td>
          <td>-&gt;</td>
          <td class="context-item-value">inheritance_column=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_sequence_name</td>
          <td>-&gt;</td>
          <td class="context-item-value">sequence_name=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">sanitize_sql_for_conditions</td>
          <td>-&gt;</td>
          <td class="context-item-value">sanitize_sql</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">sanitize_sql_hash_for_conditions</td>
          <td>-&gt;</td>
          <td class="context-item-value">sanitize_sql_hash</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">sanitize_sql</td>
          <td>-&gt;</td>
          <td class="context-item-value">sanitize_conditions</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">abstract_class</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Set this to true if this is an abstract class (see <tt><a
href="Base.html#M001521">abstract_class?</a></tt>).

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M001519" class="method-detail">
        <a name="M001519"></a>

        <div class="method-heading">
          <a href="#M001519" class="method-signature">
          <span class="method-name">===</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Overwrite the default class equality method to provide support for
association proxies.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001519-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001519-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 813</span>
813:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">object</span>)
814:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword kw">self</span>)
815:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001521" class="method-detail">
        <a name="M001521"></a>

        <div class="method-heading">
          <a href="#M001521" class="method-signature">
          <span class="method-name">abstract_class?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns whether this class is an abstract class or not.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001521-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001521-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 831</span>
831:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abstract_class?</span>
832:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@abstract_class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@abstract_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
833:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001525" class="method-detail">
        <a name="M001525"></a>

        <div class="method-heading">
          <a href="#M001525" class="method-signature">
          <span class="method-name">arel_engine</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001525-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001525-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 853</span>
853:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">arel_engine</span>
854:         <span class="ruby-ivar">@arel_engine</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
855:           <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
856:             <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Table</span>.<span class="ruby-identifier">engine</span>
857:           <span class="ruby-keyword kw">else</span>
858:             <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">connection_pools</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Sql</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">arel_engine</span>
859:           <span class="ruby-keyword kw">end</span>
860:         <span class="ruby-keyword kw">end</span>
861:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001524" class="method-detail">
        <a name="M001524"></a>

        <div class="method-heading">
          <a href="#M001524" class="method-signature">
          <span class="method-name">arel_table</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001524-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001524-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 849</span>
849:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">arel_table</span>
850:         <span class="ruby-ivar">@arel_table</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">arel_engine</span>)
851:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001500" class="method-detail">
        <a name="M001500"></a>

        <div class="method-heading">
          <a href="#M001500" class="method-signature">
          <span class="method-name">attr_readonly</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Attributes listed as readonly will be used to <a
href="Base.html#M001498">create</a> a <a href="Base.html#M001538">new</a>
record but update operations will ignore these fields.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001500-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001500-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 521</span>
521:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_readonly</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
522:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_readonly</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_s</span> }) <span class="ruby-operator">+</span> (<span class="ruby-identifier">readonly_attributes</span> <span class="ruby-operator">||</span> []))
523:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001516" class="method-detail">
        <a name="M001516"></a>

        <div class="method-heading">
          <a href="#M001516" class="method-signature">
          <span class="method-name">attribute_method?</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001516-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001516-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 751</span>
751:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_method?</span>(<span class="ruby-identifier">attribute</span>)
752:         <span class="ruby-keyword kw">super</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">table_exists?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/=$/</span>, <span class="ruby-value str">''</span>)))
753:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001520" class="method-detail">
        <a name="M001520"></a>

        <div class="method-heading">
          <a href="#M001520" class="method-signature">
          <span class="method-name">base_class</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>
<p>
If B &lt; A and C &lt; B and if A is an abstract_class then both
B.base_class and C.base_class would return B as the answer since A is an
abstract_class.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001520-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001520-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 823</span>
823:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base_class</span>
824:         <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-keyword kw">self</span>)
825:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001496" class="method-detail">
        <a name="M001496"></a>

        <div class="method-heading">
          <a href="#M001496" class="method-signature">
          <span class="method-name">colorize_logging</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001496-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001496-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 432</span>
432:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">colorize_logging</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
433:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;ActiveRecord::Base.colorize_logging and &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
434:           <span class="ruby-value str">&quot;config.active_record.colorize_logging are deprecated. Please use &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
435:           <span class="ruby-value str">&quot;Rails::LogSubscriber.colorize_logging or config.colorize_logging instead&quot;</span>, <span class="ruby-identifier">caller</span>
436:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001513" class="method-detail">
        <a name="M001513"></a>

        <div class="method-heading">
          <a href="#M001513" class="method-signature">
          <span class="method-name">column_names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column names as strings.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001513-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001513-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 691</span>
691:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_names</span>
692:         <span class="ruby-ivar">@column_names</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> }
693:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001511" class="method-detail">
        <a name="M001511"></a>

        <div class="method-heading">
          <a href="#M001511" class="method-signature">
          <span class="method-name">columns</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column objects for the table associated with this
class.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001511-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001511-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 677</span>
677:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>
678:         <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@columns</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@columns</span>
679:           <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{name} Columns&quot;</span>)
680:           <span class="ruby-ivar">@columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">primary</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span> }
681:         <span class="ruby-keyword kw">end</span>
682:         <span class="ruby-ivar">@columns</span>
683:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001512" class="method-detail">
        <a name="M001512"></a>

        <div class="method-heading">
          <a href="#M001512" class="method-signature">
          <span class="method-name">columns_hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M001553">hash</a> of column objects for the
table associated with this class.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001512-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001512-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 686</span>
686:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns_hash</span>
687:         <span class="ruby-ivar">@columns_hash</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">column</span>; <span class="ruby-identifier">hash</span> }
688:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001493" class="method-detail">
        <a name="M001493"></a>

        <div class="method-heading">
          <a href="#M001493" class="method-signature">
          <span class="method-name">connected?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if Active Record is connected.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001493-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001493-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 101</span>
101:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connected?</span>
102:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">connected?</span>(<span class="ruby-keyword kw">self</span>)
103:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001490" class="method-detail">
        <a name="M001490"></a>

        <div class="method-heading">
          <a href="#M001490" class="method-signature">
          <span class="method-name">connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Base.html#M001488">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M001488">connection</a> to do database work unrelated to
any of the specific Active Records.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001490-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001490-source">
<pre>
    <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 88</span>
88:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
89:         <span class="ruby-identifier">retrieve_connection</span>
90:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001491" class="method-detail">
        <a name="M001491"></a>

        <div class="method-heading">
          <a href="#M001491" class="method-signature">
          <span class="method-name">connection_pool</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001491-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001491-source">
<pre>
    <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 92</span>
92:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection_pool</span>
93:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection_pool</span>(<span class="ruby-keyword kw">self</span>)
94:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001514" class="method-detail">
        <a name="M001514"></a>

        <div class="method-heading">
          <a href="#M001514" class="method-signature">
          <span class="method-name">content_columns</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column objects where the primary id, all <a
href="Base.html#M001511">columns</a> ending in &quot;_id&quot; or
&quot;_count&quot;, and <a href="Base.html#M001511">columns</a> used for
single table inheritance have been removed.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001514-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001514-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 697</span>
697:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_columns</span>
698:         <span class="ruby-ivar">@content_columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">primary</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(_id|_count)$/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">inheritance_column</span> }
699:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001499" class="method-detail">
        <a name="M001499"></a>

        <div class="method-heading">
          <a href="#M001499" class="method-signature">
          <span class="method-name">count_by_sql</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part. The use of this method should be restricted to
complicated SQL queries that can&#8216;t be executed using the <a
href="Calculations.html">ActiveRecord::Calculations</a> class methods. Look
into those before using this.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>sql</tt> - An SQL statement which should return a count query from the
database, see the example below.

</li>
</ul>
<h4>Examples</h4>
<pre>
  Product.count_by_sql &quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001499-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001499-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 514</span>
514:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_by_sql</span>(<span class="ruby-identifier">sql</span>)
515:         <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sanitize_conditions</span>(<span class="ruby-identifier">sql</span>)
516:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Count&quot;</span>).<span class="ruby-identifier">to_i</span>
517:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001498" class="method-detail">
        <a name="M001498"></a>

        <div class="method-heading">
          <a href="#M001498" class="method-signature">
          <span class="method-name">create</span><span class="method-args">(attributes = nil) {|object| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<p>
The <tt><a href="Base.html#M001547">attributes</a></tt> parameter can be
either be a Hash or an Array of Hashes. These Hashes describe the <a
href="Base.html#M001547">attributes</a> on the objects that are to be
created.
</p>
<h4>Examples</h4>
<pre>
  # Create a single new object
  User.create(:first_name =&gt; 'Jamie')

  # Create an Array of new objects
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }])

  # Create a single object and pass it into a block to set other attributes.
  User.create(:first_name =&gt; 'Jamie') do |u|
    u.is_admin = false
  end

  # Creating an Array of new objects using a block, where the block is executed for each object:
  User.create([{ :first_name =&gt; 'Jamie' }, { :first_name =&gt; 'Jeremy' }]) do |u|
    u.is_admin = false
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001498-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001498-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 492</span>
492:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
493:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
494:           <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
495:         <span class="ruby-keyword kw">else</span>
496:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
497:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">object</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
498:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
499:           <span class="ruby-identifier">object</span>
500:         <span class="ruby-keyword kw">end</span>
501:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001517" class="method-detail">
        <a name="M001517"></a>

        <div class="method-heading">
          <a href="#M001517" class="method-signature">
          <span class="method-name">descends_from_active_record?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
True if this isn&#8216;t a concrete subclass needing a STI type condition.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001517-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001517-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 776</span>
776:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descends_from_active_record?</span>
777:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
778:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">descends_from_active_record?</span>
779:         <span class="ruby-keyword kw">else</span>
780:           <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
781:         <span class="ruby-keyword kw">end</span>
782:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001489" class="method-detail">
        <a name="M001489"></a>

        <div class="method-heading">
          <a href="#M001489" class="method-signature">
          <span class="method-name">establish_connection</span><span class="method-args">(spec = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Establishes the <a href="Base.html#M001488">connection</a> to the database.
Accepts a <a href="Base.html#M001553">hash</a> as input where the
<tt>:adapter</tt> key must be specified with the name of a database adapter
(in lower-case) example for regular databases (MySQL, Postgresql, etc):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter  =&gt; &quot;mysql&quot;,
    :host     =&gt; &quot;localhost&quot;,
    :username =&gt; &quot;myuser&quot;,
    :password =&gt; &quot;mypass&quot;,
    :database =&gt; &quot;somedatabase&quot;
  )
</pre>
<p>
Example for SQLite database:
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter =&gt; &quot;sqlite&quot;,
    :database  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
Also accepts keys as strings (for parsing from YAML for example):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    &quot;adapter&quot; =&gt; &quot;sqlite&quot;,
    &quot;database&quot;  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
The exceptions <a href="AdapterNotSpecified.html">AdapterNotSpecified</a>,
<a href="AdapterNotFound.html">AdapterNotFound</a> and ArgumentError may be
returned on an error.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001489-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001489-source">
<pre>
    <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">spec</span> = <span class="ruby-keyword kw">nil</span>)
52:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">spec</span>
53:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
54:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>)
55:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>)
56:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ConnectionSpecification</span>
57:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">spec</span>)
58:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-constant">String</span>
59:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_s</span>]
60:             <span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">configuration</span>)
61:           <span class="ruby-keyword kw">else</span>
62:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-node">&quot;#{spec} database is not configured&quot;</span>
63:           <span class="ruby-keyword kw">end</span>
64:         <span class="ruby-keyword kw">else</span>
65:           <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">symbolize_keys</span>
66:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:adapter</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-value str">&quot;database configuration does not specify adapter&quot;</span> <span class="ruby-keyword kw">end</span>
67: 
68:           <span class="ruby-keyword kw">begin</span>
69:             <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;active_record/connection_adapters/#{spec[:adapter]}_adapter&quot;</span>
70:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
71:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Please install the #{spec[:adapter]} adapter: `gem install activerecord-#{spec[:adapter]}-adapter` (#{$!})&quot;</span>
72:           <span class="ruby-keyword kw">end</span>
73: 
74:           <span class="ruby-identifier">adapter_method</span> = <span class="ruby-node">&quot;#{spec[:adapter]}_connection&quot;</span>
75:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">adapter_method</span>)
76:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotFound</span>, <span class="ruby-node">&quot;database configuration specifies nonexistent #{spec[:adapter]} adapter&quot;</span>
77:           <span class="ruby-keyword kw">end</span>
78: 
79:           <span class="ruby-identifier">remove_connection</span>
80:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">ConnectionSpecification</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">adapter_method</span>))
81:       <span class="ruby-keyword kw">end</span>
82:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001497" class="method-detail">
        <a name="M001497"></a>

        <div class="method-heading">
          <a href="#M001497" class="method-signature">
          <span class="method-name">find_by_sql</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes a custom SQL query against your database and returns all the
results. The results will be returned as an array with <a
href="Base.html#M001511">columns</a> requested encapsulated as <a
href="Base.html#M001547">attributes</a> of the model you call this method
from. If you call <tt>Product.find_by_sql</tt> then the results will be
returned in a Product object with the <a
href="Base.html#M001547">attributes</a> you specified in the SQL query.
</p>
<p>
If you call a complicated SQL query which spans multiple tables the <a
href="Base.html#M001511">columns</a> specified by the SELECT will be <a
href="Base.html#M001547">attributes</a> of the model, whether or not they
are <a href="Base.html#M001511">columns</a> of the corresponding table.
</p>
<p>
The <tt>sql</tt> parameter is a full SQL query as a string. It will be
called as is, there will be no database agnostic conversions performed.
This should be a last resort because using, for example, MySQL specific
terms will lock you to using that particular database engine or require you
to change your call if you switch engines.
</p>
<h4>Examples</h4>
<pre>
  # A simple SQL query spanning multiple tables
  Post.find_by_sql &quot;SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;title&quot;=&gt;&quot;Ruby Meetup&quot;, &quot;first_name&quot;=&gt;&quot;Quentin&quot;}&gt;, ...]

  # You can use the same string replacement techniques as you can with ActiveRecord#find
  Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;first_name&quot;=&gt;&quot;The Cheap Man Buys Twice&quot;}&gt;, ...]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001497-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001497-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 466</span>
466:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">sql</span>)
467:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">sql</span>), <span class="ruby-node">&quot;#{name} Load&quot;</span>).<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instantiate</span>(<span class="ruby-identifier">record</span>) }
468:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001506" class="method-detail">
        <a name="M001506"></a>

        <div class="method-heading">
          <a href="#M001506" class="method-signature">
          <span class="method-name">inheritance_column</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines the column name for use with single table inheritance. Use <tt><a
href="Base.html#M001508">set_inheritance_column</a></tt> to set a different
value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001506-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001506-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 610</span>
610:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inheritance_column</span>
611:         <span class="ruby-ivar">@inheritance_column</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;type&quot;</span>.<span class="ruby-identifier">freeze</span>
612:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001518" class="method-detail">
        <a name="M001518"></a>

        <div class="method-heading">
          <a href="#M001518" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a string like &#8216;Post id:integer, title:string,
body:text&#8216;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001518-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001518-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 790</span>
790:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
791:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
792:           <span class="ruby-keyword kw">super</span>
793:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">abstract_class?</span>
794:           <span class="ruby-node">&quot;#{super}(abstract)&quot;</span>
795:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">table_exists?</span>
796:           <span class="ruby-identifier">attr_list</span> = <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.name}: #{c.type}&quot;</span> } <span class="ruby-operator">*</span> <span class="ruby-value str">', '</span>
797:           <span class="ruby-node">&quot;#{super}(#{attr_list})&quot;</span>
798:         <span class="ruby-keyword kw">else</span>
799:           <span class="ruby-node">&quot;#{super}(Table doesn't exist)&quot;</span>
800:         <span class="ruby-keyword kw">end</span>
801:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001538" class="method-detail">
        <a name="M001538"></a>

        <div class="method-heading">
          <a href="#M001538" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(attributes = nil) {|self if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with <a href="Base.html#M001547">attributes</a> but
not yet saved (pass a <a href="Base.html#M001553">hash</a> with key names
matching the associated table column names). In both instances, valid
attribute keys are determined by the column names of the associated table
&#8212; hence you can&#8216;t have <a
href="Base.html#M001547">attributes</a> that aren&#8216;t part of the table
<a href="Base.html#M001511">columns</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001538-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001538-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1397</span>
1397:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>)
1398:         <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">attributes_from_column_definition</span>
1399:         <span class="ruby-ivar">@attributes_cache</span> = {}
1400:         <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">true</span>
1401:         <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword kw">false</span>
1402:         <span class="ruby-ivar">@destroyed</span> = <span class="ruby-keyword kw">false</span>
1403:         <span class="ruby-ivar">@marked_for_destruction</span> = <span class="ruby-keyword kw">false</span>
1404:         <span class="ruby-ivar">@previously_changed</span> = {}
1405:         <span class="ruby-ivar">@changed_attributes</span> = {}
1406: 
1407:         <span class="ruby-identifier">ensure_proper_type</span>
1408: 
1409:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:current_scoped_methods</span>)
1410:           <span class="ruby-identifier">create_with</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">scope_for_create</span>
1411:           <span class="ruby-identifier">create_with</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">att</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{att}=&quot;</span>, <span class="ruby-identifier">value</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">create_with</span>
1412:         <span class="ruby-keyword kw">end</span>
1413:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">nil?</span>
1414: 
1415:         <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
1416:         <span class="ruby-identifier">_run_initialize_callbacks</span>
1417:         <span class="ruby-identifier">result</span>
1418:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001505" class="method-detail">
        <a name="M001505"></a>

        <div class="method-heading">
          <a href="#M001505" class="method-signature">
          <span class="method-name">quoted_table_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a quoted version of the table name, used to construct SQL
statements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001505-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001505-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 595</span>
595:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_table_name</span>
596:         <span class="ruby-ivar">@quoted_table_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">table_name</span>)
597:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001501" class="method-detail">
        <a name="M001501"></a>

        <div class="method-heading">
          <a href="#M001501" class="method-signature">
          <span class="method-name">readonly_attributes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of all the <a href="Base.html#M001547">attributes</a> that
have been specified as readonly.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001501-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001501-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 526</span>
526:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly_attributes</span>
527:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:attr_readonly</span>) <span class="ruby-operator">||</span> []
528:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001494" class="method-detail">
        <a name="M001494"></a>

        <div class="method-heading">
          <a href="#M001494" class="method-signature">
          <span class="method-name">remove_connection</span><span class="method-args">(klass = self)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001494-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001494-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 105</span>
105:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_connection</span>(<span class="ruby-identifier">klass</span> = <span class="ruby-keyword kw">self</span>)
106:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">remove_connection</span>(<span class="ruby-identifier">klass</span>)
107:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001515" class="method-detail">
        <a name="M001515"></a>

        <div class="method-heading">
          <a href="#M001515" class="method-signature">
          <span class="method-name">reset_column_information</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Resets all the cached information about <a
href="Base.html#M001511">columns</a>, which will cause them to be reloaded
on the next request.
</p>
<p>
The most common usage pattern for this method is probably in a migration,
when just after creating a table you want to populate it with some default
values, eg:
</p>
<pre>
 class CreateJobLevels &lt; ActiveRecord::Migration
   def self.up
     create_table :job_levels do |t|
       t.integer :id
       t.string :name

       t.timestamps
     end

     JobLevel.reset_column_information
     %w{assistant executive manager director}.each do |type|
       JobLevel.create(:name =&gt; type)
     end
   end

   def self.down
     drop_table :job_levels
   end
 end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001515-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001515-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 741</span>
741:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_column_information</span>
742:         <span class="ruby-identifier">undefine_attribute_methods</span>
743:         <span class="ruby-ivar">@column_names</span> = <span class="ruby-ivar">@columns</span> = <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-ivar">@content_columns</span> = <span class="ruby-ivar">@dynamic_methods_hash</span> = <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-keyword kw">nil</span>
744:         <span class="ruby-ivar">@arel_engine</span> = <span class="ruby-ivar">@relation</span> = <span class="ruby-ivar">@arel_table</span> = <span class="ruby-keyword kw">nil</span>
745:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001522" class="method-detail">
        <a name="M001522"></a>

        <div class="method-heading">
          <a href="#M001522" class="method-signature">
          <span class="method-name">respond_to?</span><span class="method-args">(method_id, include_private = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001522-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001522-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 835</span>
835:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_id</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword kw">false</span>)
836:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicFinderMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method_id</span>)
837:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_attributes_exists?</span>(<span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
838:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">match</span> = <span class="ruby-constant">DynamicScopeMatch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">method_id</span>)
839:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_attributes_exists?</span>(<span class="ruby-identifier">match</span>.<span class="ruby-identifier">attribute_names</span>)
840:         <span class="ruby-keyword kw">end</span>
841: 
842:         <span class="ruby-keyword kw">super</span>
843:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001492" class="method-detail">
        <a name="M001492"></a>

        <div class="method-heading">
          <a href="#M001492" class="method-signature">
          <span class="method-name">retrieve_connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001492-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001492-source">
<pre>
    <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 96</span>
96:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrieve_connection</span>
97:         <span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection</span>(<span class="ruby-keyword kw">self</span>)
98:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001502" class="method-detail">
        <a name="M001502"></a>

        <div class="method-heading">
          <a href="#M001502" class="method-signature">
          <span class="method-name">serialize</span><span class="method-args">(attr_name, class_name = Object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically. The
serialization is done through YAML. If <tt>class_name</tt> is specified,
the serialized object must be of that class on retrieval or <a
href="SerializationTypeMismatch.html">SerializationTypeMismatch</a> will be
raised.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>attr_name</tt> - The field name that should be serialized.

</li>
<li><tt>class_name</tt> - Optional, class name that the object type should be
equal to.

</li>
</ul>
<h4>Example</h4>
<pre>
  # Serialize a preferences attribute
  class User
    serialize :preferences
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001502-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001502-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 545</span>
545:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">class_name</span> = <span class="ruby-constant">Object</span>)
546:         <span class="ruby-identifier">serialized_attributes</span>[<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">class_name</span>
547:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001503" class="method-detail">
        <a name="M001503"></a>

        <div class="method-heading">
          <a href="#M001503" class="method-signature">
          <span class="method-name">serialized_attributes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M001553">hash</a> of all the <a
href="Base.html#M001547">attributes</a> that have been specified for
serialization as keys and their class restriction as values.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001503-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001503-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 551</span>
551:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialized_attributes</span>
552:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:attr_serialized</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:attr_serialized</span>, {})
553:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001508" class="method-detail">
        <a name="M001508"></a>

        <div class="method-heading">
          <a href="#M001508" class="method-signature">
          <span class="method-name">set_inheritance_column</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_inheritance_column do
      original_inheritance_column + &quot;_id&quot;
    end
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001508-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001508-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 647</span>
647:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_inheritance_column</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
648:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:inheritance_column</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
649:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001509" class="method-detail">
        <a name="M001509"></a>

        <div class="method-heading">
          <a href="#M001509" class="method-signature">
          <span class="method-name">set_sequence_name</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{<a
href="Base.html#M001504">table_name</a>}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_sequence_name &quot;projectseq&quot;   # default would have been &quot;project_seq&quot;
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001509-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001509-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 666</span>
666:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sequence_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
667:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:sequence_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
668:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001507" class="method-detail">
        <a name="M001507"></a>

        <div class="method-heading">
          <a href="#M001507" class="method-signature">
          <span class="method-name">set_table_name</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the table name. If the value is nil or false then the value returned
by the given block is used.
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_table_name &quot;project&quot;
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001507-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001507-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 632</span>
632:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_table_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
633:         <span class="ruby-ivar">@quoted_table_name</span> = <span class="ruby-keyword kw">nil</span>
634:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:table_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
635:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001523" class="method-detail">
        <a name="M001523"></a>

        <div class="method-heading">
          <a href="#M001523" class="method-signature">
          <span class="method-name">sti_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001523-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001523-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 845</span>
845:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sti_name</span>
846:         <span class="ruby-identifier">store_full_sti_class</span> <span class="ruby-value">? </span><span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>
847:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001495" class="method-detail">
        <a name="M001495"></a>

        <div class="method-heading">
          <a href="#M001495" class="method-signature">
          <span class="method-name">subclasses</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001495-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001495-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 324</span>
324:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">subclasses</span>
325:         <span class="ruby-identifier">descendants</span>
326:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001510" class="method-detail">
        <a name="M001510"></a>

        <div class="method-heading">
          <a href="#M001510" class="method-signature">
          <span class="method-name">table_exists?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Indicates whether the table associated with this class exists
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001510-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001510-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 672</span>
672:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>
673:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
674:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001504" class="method-detail">
        <a name="M001504"></a>

        <div class="method-heading">
          <a href="#M001504" class="method-signature">
          <span class="method-name">table_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from <a
href="Base.html">ActiveRecord::Base</a>. So if the hierarchy looks like:
Reply &lt; Message &lt; <a href="Base.html">ActiveRecord::Base</a>, then
Message is used to guess the table name even when called on Reply. The
rules used to do the guess are handled by the Inflector class in Active
Support, which knows almost all common English inflections. You can add <a
href="Base.html#M001538">new</a> inflections in
config/initializers/inflections.rb.
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8216;s table name. Enclosing modules are not considered.
</p>
<h4>Examples</h4>
<pre>
  class Invoice &lt; ActiveRecord::Base; end;
  file                  class               table_name
  invoice.rb            Invoice             invoices

  class Invoice &lt; ActiveRecord::Base; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice.rb            Invoice::Lineitem   invoice_lineitems

  module Invoice; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice/lineitem.rb   Invoice::Lineitem   lineitems
</pre>
<p>
Additionally, the class-level <tt>table_name_prefix</tt> is prepended and
the <tt>table_name_suffix</tt> is appended. So if you have
&quot;myapp_&quot; as a prefix, the table name guess for an Invoice class
becomes &quot;myapp_invoices&quot;. Invoice::Lineitem becomes
&quot;myapp_invoice_lineitems&quot;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &quot;mice&quot; table. Example:
</p>
<pre>
  class Mouse &lt; ActiveRecord::Base
    set_table_name &quot;mice&quot;
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001504-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001504-source">
<pre>
     <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 590</span>
590:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_name</span>
591:         <span class="ruby-identifier">reset_table_name</span>
592:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Class methods</h3>

      <div id="method-M001533" class="method-detail">
        <a name="M001533"></a>

        <div class="method-heading">
          <a href="#M001533" class="method-signature">
          <span class="method-name">aggregate_mapping</span><span class="method-args">(reflection)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001533-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001533-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1246</span>
1246:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">reflection</span>)
1247:           <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mapping</span>] <span class="ruby-operator">||</span> [<span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>]
1248:           <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">mapping</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">mapping</span>]
1249:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001530" class="method-detail">
        <a name="M001530"></a>

        <div class="method-heading">
          <a href="#M001530" class="method-signature">
          <span class="method-name">class_of_active_record_descendant</span><span class="method-args">(klass)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the class descending directly from <a
href="Base.html">ActiveRecord::Base</a> or an abstract class, if any, in
the inheritance hierarchy.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001530-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001530-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1209</span>
1209:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>)
1210:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1211:             <span class="ruby-identifier">klass</span>
1212:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">nil?</span>
1213:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} doesn't belong in a hierarchy descending from ActiveRecord&quot;</span>
1214:           <span class="ruby-keyword kw">else</span>
1215:             <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>)
1216:           <span class="ruby-keyword kw">end</span>
1217:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001529" class="method-detail">
        <a name="M001529"></a>

        <div class="method-heading">
          <a href="#M001529" class="method-signature">
          <span class="method-name">compute_type</span><span class="method-args">(type_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the class type of the record using the current module as a prefix.
So descendants of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001529-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001529-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1181</span>
1181:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compute_type</span>(<span class="ruby-identifier">type_name</span>)
1182:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_name</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/^::/</span>)
1183:             <span class="ruby-comment cmt"># If the type is prefixed with a scope operator then we assume that</span>
1184:             <span class="ruby-comment cmt"># the type_name is an absolute reference.</span>
1185:             <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">type_name</span>)
1186:           <span class="ruby-keyword kw">else</span>
1187:             <span class="ruby-comment cmt"># Build a list of candidates to search for</span>
1188:             <span class="ruby-identifier">candidates</span> = []
1189:             <span class="ruby-identifier">name</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/::|$/</span>) { <span class="ruby-identifier">candidates</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-node">&quot;#{$`}::#{type_name}&quot;</span> }
1190:             <span class="ruby-identifier">candidates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type_name</span>
1191: 
1192:             <span class="ruby-identifier">candidates</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">candidate</span><span class="ruby-operator">|</span>
1193:               <span class="ruby-keyword kw">begin</span>
1194:                 <span class="ruby-identifier">constant</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">candidate</span>)
1195:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">constant</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">candidate</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">to_s</span>
1196:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1197:                 <span class="ruby-comment cmt"># We don't want to swallow NoMethodError &lt; NameError errors</span>
1198:                 <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">NameError</span>)
1199:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
1200:               <span class="ruby-keyword kw">end</span>
1201:             <span class="ruby-keyword kw">end</span>
1202: 
1203:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>, <span class="ruby-node">&quot;uninitialized constant #{candidates.first}&quot;</span>
1204:           <span class="ruby-keyword kw">end</span>
1205:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001528" class="method-detail">
        <a name="M001528"></a>

        <div class="method-heading">
          <a href="#M001528" class="method-signature">
          <span class="method-name">default_scope</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the default options for the model. The format of the <tt>options</tt>
argument is the same as in find.
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    default_scope order('last_name, first_name')
  end
</pre>
<p>
<tt><a href="Base.html#M001528">default_scope</a></tt> is also applied
while creating/building a record. It is not applied while updating a
record.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    default_scope where(:published =&gt; true)
  end

  Article.new.published    # =&gt; true
  Article.create.published # =&gt; true
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001528-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001528-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1171</span>
1171:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_scope</span>(<span class="ruby-identifier">options</span> = {})
1172:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_scoping</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">construct_finder_arel</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">default_scoping</span>.<span class="ruby-identifier">pop</span>)
1173:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001534" class="method-detail">
        <a name="M001534"></a>

        <div class="method-heading">
          <a href="#M001534" class="method-signature">
          <span class="method-name">expand_hash_conditions_for_aggregates</span><span class="method-args">(attrs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts a <a href="Base.html#M001553">hash</a> of SQL conditions and
replaces those <a href="Base.html#M001547">attributes</a> that correspond
to a <tt>composed_of</tt> relationship with their expanded aggregate
attribute values. Given:
</p>
<pre>
    class Person &lt; ActiveRecord::Base
      composed_of :address, :class_name =&gt; &quot;Address&quot;,
        :mapping =&gt; [%w(address_street street), %w(address_city city)]
    end
</pre>
<p>
Then:
</p>
<pre>
    { :address =&gt; Address.new(&quot;813 abc st.&quot;, &quot;chicago&quot;) }
      # =&gt; { :address_street =&gt; &quot;813 abc st.&quot;, :address_city =&gt; &quot;chicago&quot; }
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001534-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001534-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1262</span>
1262:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
1263:           <span class="ruby-identifier">expanded_attrs</span> = {}
1264:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1265:             <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">aggregation</span> = <span class="ruby-identifier">reflect_on_aggregation</span>(<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_sym</span>)).<span class="ruby-identifier">nil?</span>
1266:               <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">aggregation</span>)
1267:               <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_attr</span>, <span class="ruby-identifier">aggregate_attr</span><span class="ruby-operator">|</span>
1268:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">aggregate_attr</span>)
1269:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>
1270:                 <span class="ruby-keyword kw">else</span>
1271:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">aggregate_attr</span>)
1272:                 <span class="ruby-keyword kw">end</span>
1273:               <span class="ruby-keyword kw">end</span>
1274:             <span class="ruby-keyword kw">else</span>
1275:               <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">value</span>
1276:             <span class="ruby-keyword kw">end</span>
1277:           <span class="ruby-keyword kw">end</span>
1278:           <span class="ruby-identifier">expanded_attrs</span>
1279:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001537" class="method-detail">
        <a name="M001537"></a>

        <div class="method-heading">
          <a href="#M001537" class="method-signature">
          <span class="method-name">sanitize_sql_array</span><span class="method-args">(ary)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts an array of conditions. The array has each value sanitized and
interpolated into the SQL statement.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001537-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001537-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1316</span>
1316:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">ary</span>)
1317:           <span class="ruby-identifier">statement</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span> = <span class="ruby-identifier">ary</span>
1318:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">statement</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/:\w+/</span>
1319:             <span class="ruby-identifier">replace_named_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>)
1320:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'?'</span>)
1321:             <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>)
1322:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">blank?</span>
1323:             <span class="ruby-identifier">statement</span>
1324:           <span class="ruby-keyword kw">else</span>
1325:             <span class="ruby-identifier">statement</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>) }
1326:           <span class="ruby-keyword kw">end</span>
1327:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001532" class="method-detail">
        <a name="M001532"></a>

        <div class="method-heading">
          <a href="#M001532" class="method-signature">
          <span class="method-name">sanitize_sql_for_assignment</span><span class="method-args">(assignments)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts an array, <a href="Base.html#M001553">hash</a>, or string of SQL
conditions and sanitizes them into a valid SQL fragment for a SET clause.
</p>
<pre>
  { :name =&gt; nil, :group_id =&gt; 4 }  returns &quot;name = NULL , group_id='4'&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001532-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001532-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1238</span>
1238:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1239:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">assignments</span>
1240:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">assignments</span>)
1241:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1242:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">assignments</span>
1243:           <span class="ruby-keyword kw">end</span>
1244:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001531" class="method-detail">
        <a name="M001531"></a>

        <div class="method-heading">
          <a href="#M001531" class="method-signature">
          <span class="method-name">sanitize_sql_for_conditions</span><span class="method-args">(condition, table_name = self.table_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts an array, <a href="Base.html#M001553">hash</a>, or string of SQL
conditions and sanitizes them into a valid SQL fragment for a WHERE clause.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }  returns &quot;name='foo''bar' and group_id='4'&quot;
  &quot;name='foo''bar' and group_id='4'&quot; returns &quot;name='foo''bar' and group_id='4'&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001531-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001531-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1224</span>
1224:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_conditions</span>(<span class="ruby-identifier">condition</span>, <span class="ruby-identifier">table_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">table_name</span>)
1225:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">blank?</span>
1226: 
1227:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">condition</span>
1228:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">condition</span>)
1229:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">condition</span>, <span class="ruby-identifier">table_name</span>)
1230:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">condition</span>
1231:           <span class="ruby-keyword kw">end</span>
1232:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001536" class="method-detail">
        <a name="M001536"></a>

        <div class="method-heading">
          <a href="#M001536" class="method-signature">
          <span class="method-name">sanitize_sql_hash_for_assignment</span><span class="method-args">(attrs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sanitizes a <a href="Base.html#M001553">hash</a> of attribute/value pairs
into SQL conditions for a SET clause.
</p>
<pre>
  { :status =&gt; nil, :group_id =&gt; 1 }
    # =&gt; &quot;status = NULL , group_id = 1&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001536-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001536-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1307</span>
1307:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">attrs</span>)
1308:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1309:             <span class="ruby-node">&quot;#{connection.quote_column_name(attr)} = #{quote_bound_value(value)}&quot;</span>
1310:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
1311:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001535" class="method-detail">
        <a name="M001535"></a>

        <div class="method-heading">
          <a href="#M001535" class="method-signature">
          <span class="method-name">sanitize_sql_hash_for_conditions</span><span class="method-args">(attrs, default_table_name = self.table_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sanitizes a <a href="Base.html#M001553">hash</a> of attribute/value pairs
into SQL conditions for a WHERE clause.
</p>
<pre>
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }
    # =&gt; &quot;name='foo''bar' and group_id= 4&quot;
  { :status =&gt; nil, :group_id =&gt; [1,2,3] }
    # =&gt; &quot;status IS NULL and group_id IN (1,2,3)&quot;
  { :age =&gt; 13..18 }
    # =&gt; &quot;age BETWEEN 13 AND 18&quot;
  { 'other_records.id' =&gt; 7 }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
  { :other_records =&gt; { :id =&gt; 7 } }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
</pre>
<p>
And for value objects on a composed_of relationship:
</p>
<pre>
  { :address =&gt; Address.new(&quot;123 abc st.&quot;, &quot;chicago&quot;) }
    # =&gt; &quot;address_street='123 abc st.' and address_city='chicago'&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001535-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001535-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1295</span>
1295:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">default_table_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">table_name</span>)
1296:           <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
1297: 
1298:           <span class="ruby-identifier">table</span> = <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">:engine</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">arel_engine</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default_table_name</span>)
1299:           <span class="ruby-identifier">builder</span> = <span class="ruby-constant">PredicateBuilder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arel_engine</span>)
1300:           <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">build_from_hash</span>(<span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">table</span>).<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">to_sql</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' AND '</span>)
1301:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001527" class="method-detail">
        <a name="M001527"></a>

        <div class="method-heading">
          <a href="#M001527" class="method-signature">
          <span class="method-name">with_exclusive_scope</span><span class="method-args">(method_scoping = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Works like <a href="Base.html#M001526">with_scope</a>, but discards any
nested properties.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001527-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001527-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1136</span>
1136:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_exclusive_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1137:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Relation</span>) }
1138:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;New finder API can not be used with_exclusive_scope. You can either call unscoped to get an anonymous scope not bound to the default_scope:\n\nUser.unscoped.where(:active =&gt; true)\n\nOr call unscoped with a block:\n\nUser.unscoped do\nUser.where(:active =&gt; true).all\nend\n\n&quot;</span>
1139:           <span class="ruby-keyword kw">end</span>
1140:           <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span>, <span class="ruby-identifier">:overwrite</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1141:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001526" class="method-detail">
        <a name="M001526"></a>

        <div class="method-heading">
          <a href="#M001526" class="method-signature">
          <span class="method-name">with_scope</span><span class="method-args">(method_scoping = {}, action = :merge) {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="Base.html#M001526">with_scope</a> lets you apply options to inner
block incrementally. It takes a <a href="Base.html#M001553">hash</a> and
the keys must be <tt>:find</tt> or <tt>:<a
href="Base.html#M001498">create</a></tt>. <tt>:find</tt> parameter is
<tt><a href="Relation.html">Relation</a></tt> while <tt>:<a
href="Base.html#M001498">create</a></tt> parameters are an <a
href="Base.html#M001547">attributes</a> <a
href="Base.html#M001553">hash</a>.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.create_with_scope
      with_scope(:find =&gt; where(:blog_id =&gt; 1), :create =&gt; { :blog_id =&gt; 1 }) do
        find(1) # =&gt; SELECT * from articles WHERE blog_id = 1 AND id = 1
        a = create(1)
        a.blog_id # =&gt; 1
      end
    end
  end
</pre>
<p>
In nested scopings, all previous parameters are overwritten by the
innermost rule, with the exception of <tt>where</tt>, <tt>includes</tt>,
and <tt>joins</tt> operations in <tt><a
href="Relation.html">Relation</a></tt>, which are merged.
</p>
<p>
<tt>joins</tt> operations are uniqued so multiple scopes can join in the
same table without table aliasing problems. If you need to join multiple
tables, but still want one of the tables to be uniqued, use the array of
strings format for your joins.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_scope
      with_scope(:find =&gt; where(:blog_id =&gt; 1).limit(1), :create =&gt; { :blog_id =&gt; 1 }) do
        with_scope(:find =&gt; limit(10)) do
          all # =&gt; SELECT * from articles WHERE blog_id = 1 LIMIT 10
        end
        with_scope(:find =&gt; where(:author_id =&gt; 3)) do
          all # =&gt; SELECT * from articles WHERE blog_id = 1 AND author_id = 3 LIMIT 1
        end
      end
    end
  end
</pre>
<p>
You can ignore any previous scopings by using the <tt><a
href="Base.html#M001527">with_exclusive_scope</a></tt> method.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_exclusive_scope
      with_scope(:find =&gt; where(:blog_id =&gt; 1).limit(1)) do
        with_exclusive_scope(:find =&gt; limit(10)) do
          all # =&gt; SELECT * from articles LIMIT 10
        end
      end
    end
  end
</pre>
<p>
<b>Note</b>: the +:find+ scope also has effect on update and deletion
methods, like <tt>update_all</tt> and <tt>delete_all</tt>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001526-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001526-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1095</span>
1095:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-identifier">action</span> = <span class="ruby-identifier">:merge</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1096:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">method_scoping</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:method_scoping</span>)
1097: 
1098:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
1099:             <span class="ruby-comment cmt"># Dup first and second level of hash (method and params).</span>
1100:             <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
1101:               <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = (<span class="ruby-identifier">params</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">params</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">dup</span>
1102:               <span class="ruby-identifier">hash</span>
1103:             <span class="ruby-keyword kw">end</span>
1104: 
1105:             <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">assert_valid_keys</span>([ <span class="ruby-identifier">:find</span>, <span class="ruby-identifier">:create</span> ])
1106:             <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">construct_finder_arel</span>(<span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:find</span>] <span class="ruby-operator">||</span> {})
1107: 
1108:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_scoped_methods</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">create_with_value</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:create</span>]
1109:               <span class="ruby-identifier">scope_for_create</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:merge</span>
1110:                 <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">create_with_value</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:create</span>])
1111:               <span class="ruby-keyword kw">else</span>
1112:                 <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:create</span>]
1113:               <span class="ruby-keyword kw">end</span>
1114: 
1115:               <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">scope_for_create</span>)
1116:             <span class="ruby-keyword kw">else</span>
1117:               <span class="ruby-identifier">scope_for_create</span> = <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:create</span>]
1118:               <span class="ruby-identifier">scope_for_create</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">create_with_value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_scoped_methods</span>
1119:               <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">scope_for_create</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope_for_create</span>
1120:             <span class="ruby-keyword kw">end</span>
1121: 
1122:             <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">relation</span>
1123:           <span class="ruby-keyword kw">end</span>
1124: 
1125:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">method_scoping</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_scoped_methods</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span>  <span class="ruby-identifier">:merge</span>
1126: 
1127:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_scoping</span>
1128:           <span class="ruby-keyword kw">begin</span>
1129:             <span class="ruby-keyword kw">yield</span>
1130:           <span class="ruby-keyword kw">ensure</span>
1131:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span>.<span class="ruby-identifier">pop</span>
1132:           <span class="ruby-keyword kw">end</span>
1133:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001551" class="method-detail">
        <a name="M001551"></a>

        <div class="method-heading">
          <a href="#M001551" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(comparison_object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same id.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001551-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001551-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1602</span>
1602:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">comparison_object</span>)
1603:         <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">||</span>
1604:           (<span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
1605:             <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">new_record?</span>)
1606:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001544" class="method-detail">
        <a name="M001544"></a>

        <div class="method-heading">
          <a href="#M001544" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(attr_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001544-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001544-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1509</span>
1509:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attr_name</span>)
1510:         <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
1511:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001545" class="method-detail">
        <a name="M001545"></a>

        <div class="method-heading">
          <a href="#M001545" class="method-signature">
          <span class="method-name">[]=</span><span class="method-args">(attr_name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001545-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001545-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1515</span>
1515:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
1516:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
1517:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001548" class="method-detail">
        <a name="M001548"></a>

        <div class="method-heading">
          <a href="#M001548" class="method-signature">
          <span class="method-name">attribute_for_inspect</span><span class="method-args">(attr_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an <tt><a href="Base.html#M001518">inspect</a></tt>-like string for
the value of the attribute <tt>attr_name</tt>. String <a
href="Base.html#M001547">attributes</a> are elided after 50 characters, and
Date and <a href="../Time.html">Time</a> <a
href="Base.html#M001547">attributes</a> are returned in the <tt>:db</tt>
format. Other <a href="Base.html#M001547">attributes</a> return the value
of <tt><a href="Base.html#M001518">inspect</a></tt> without modification.
</p>
<pre>
  person = Person.create!(:name =&gt; &quot;David Heinemeier Hansson &quot; * 3)

  person.attribute_for_inspect(:name)
  # =&gt; '&quot;David Heinemeier Hansson David Heinemeier Hansson D...&quot;'

  person.attribute_for_inspect(:created_at)
  # =&gt; '&quot;2009-01-12 04:48:57&quot;'
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001548-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001548-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1577</span>
1577:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
1578:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
1579: 
1580:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>
1581:           <span class="ruby-node">&quot;#{value[0..50]}...&quot;</span>.<span class="ruby-identifier">inspect</span>
1582:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Date</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
1583:           <span class="ruby-node">%(&quot;#{value.to_s(:db)}&quot;)</span>
1584:         <span class="ruby-keyword kw">else</span>
1585:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inspect</span>
1586:         <span class="ruby-keyword kw">end</span>
1587:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001543" class="method-detail">
        <a name="M001543"></a>

        <div class="method-heading">
          <a href="#M001543" class="method-signature">
          <span class="method-name">attribute_names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of names for the <a
href="Base.html#M001547">attributes</a> available on this object sorted
alphabetically.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001543-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001543-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1502</span>
1502:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_names</span>
1503:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
1504:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001549" class="method-detail">
        <a name="M001549"></a>

        <div class="method-heading">
          <a href="#M001549" class="method-signature">
          <span class="method-name">attribute_present?</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001549-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001549-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1591</span>
1591:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attribute</span>)
1592:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attribute</span>)
1593:         <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
1594:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001547" class="method-detail">
        <a name="M001547"></a>

        <div class="method-heading">
          <a href="#M001547" class="method-signature">
          <span class="method-name">attributes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M001553">hash</a> of all the <a
href="Base.html#M001547">attributes</a> with their names as keys and the
values of the <a href="Base.html#M001547">attributes</a> as values.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001547-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001547-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1558</span>
1558:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>
1559:         <span class="ruby-identifier">attrs</span> = {}
1560:         <span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">name</span>) }
1561:         <span class="ruby-identifier">attrs</span>
1562:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001546" class="method-detail">
        <a name="M001546"></a>

        <div class="method-heading">
          <a href="#M001546" class="method-signature">
          <span class="method-name">attributes=</span><span class="method-args">(new_attributes, guard_protected_attributes = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Allows you to set all the <a href="Base.html#M001547">attributes</a> at
once by passing in a <a href="Base.html#M001553">hash</a> with keys
matching the attribute names (which again matches the column names).
</p>
<p>
If <tt>guard_protected_attributes</tt> is true (the default), then
sensitive <a href="Base.html#M001547">attributes</a> can be protected from
this form of mass-assignment by using the <tt>attr_protected</tt> macro. Or
you can alternatively specify which <a
href="Base.html#M001547">attributes</a> <b>can</b> be accessed with the
<tt>attr_accessible</tt> macro. Then all the <a
href="Base.html#M001547">attributes</a> not included in that won&#8216;t be
allowed to be mass-assigned.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    attr_protected :is_admin
  end

  user = User.new
  user.attributes = { :username =&gt; 'Phusion', :is_admin =&gt; true }
  user.username   # =&gt; &quot;Phusion&quot;
  user.is_admin?  # =&gt; false

  user.send(:attributes=, { :username =&gt; 'Phusion', :is_admin =&gt; true }, false)
  user.is_admin?  # =&gt; true
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001546-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001546-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1539</span>
1539:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">new_attributes</span>, <span class="ruby-identifier">guard_protected_attributes</span> = <span class="ruby-keyword kw">true</span>)
1540:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
1541:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">stringify_keys</span>
1542: 
1543:         <span class="ruby-identifier">multi_parameter_attributes</span> = []
1544:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">sanitize_for_mass_assignment</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">guard_protected_attributes</span>
1545: 
1546:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
1547:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;(&quot;</span>)
1548:             <span class="ruby-identifier">multi_parameter_attributes</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ]
1549:           <span class="ruby-keyword kw">else</span>
1550:             <span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{k}=&quot;</span><span class="ruby-node">&quot;#{k}=&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{k}=&quot;</span><span class="ruby-node">&quot;#{k}=&quot;</span>, <span class="ruby-identifier">v</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">UnknownAttributeError</span>, <span class="ruby-node">&quot;unknown attribute: #{k}&quot;</span>)
1551:           <span class="ruby-keyword kw">end</span>
1552:         <span class="ruby-keyword kw">end</span>
1553: 
1554:         <span class="ruby-identifier">assign_multiparameter_attributes</span>(<span class="ruby-identifier">multi_parameter_attributes</span>)
1555:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001541" class="method-detail">
        <a name="M001541"></a>

        <div class="method-heading">
          <a href="#M001541" class="method-signature">
          <span class="method-name">cache_key</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a cache key that can be used to identify this record.
</p>
<h4>Examples</h4>
<pre>
  Product.new.cache_key     # =&gt; &quot;products/new&quot;
  Product.find(5).cache_key # =&gt; &quot;products/5&quot; (updated_at not available)
  Person.find(5).cache_key  # =&gt; &quot;people/5-20071224150000&quot; (updated_at available)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001541-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001541-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1481</span>
1481:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_key</span>
1482:         <span class="ruby-keyword kw">case</span>
1483:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">new_record?</span>
1484:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/new&quot;</span>
1485:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">timestamp</span> = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:updated_at</span>]
1486:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/#{id}-#{timestamp.to_s(:number)}&quot;</span>
1487:         <span class="ruby-keyword kw">else</span>
1488:           <span class="ruby-node">&quot;#{self.class.model_name.cache_key}/#{id}&quot;</span>
1489:         <span class="ruby-keyword kw">end</span>
1490:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001550" class="method-detail">
        <a name="M001550"></a>

        <div class="method-heading">
          <a href="#M001550" class="method-signature">
          <span class="method-name">column_for_attribute</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the column object for the named attribute.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001550-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001550-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1597</span>
1597:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>)
1598:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>]
1599:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001488" class="method-detail">
        <a name="M001488"></a>

        <div class="method-heading">
          <a href="#M001488" class="method-signature">
          <span class="method-name">connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Base.html#M001488">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M001488">connection</a> to do database work that
isn&#8216;t easily done without going straight to SQL.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001488-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001488-source">
<pre>
    <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 19</span>
19:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
20:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>
21:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001556" class="method-detail">
        <a name="M001556"></a>

        <div class="method-heading">
          <a href="#M001556" class="method-signature">
          <span class="method-name">dup</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns duplicated record with unfreezed <a
href="Base.html#M001547">attributes</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001556-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001556-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1630</span>
1630:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dup</span>
1631:         <span class="ruby-identifier">obj</span> = <span class="ruby-keyword kw">super</span>
1632:         <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">'@attributes'</span>, <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">dup</span>)
1633:         <span class="ruby-identifier">obj</span>
1634:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001552" class="method-detail">
        <a name="M001552"></a>

        <div class="method-heading">
          <a href="#M001552" class="method-signature">
          <span class="method-name">eql?</span><span class="method-args">(comparison_object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delegates to ==
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001552-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001552-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1609</span>
1609:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">comparison_object</span>)
1610:         <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">comparison_object</span>)
1611:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001554" class="method-detail">
        <a name="M001554"></a>

        <div class="method-heading">
          <a href="#M001554" class="method-signature">
          <span class="method-name">freeze</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Freeze the <a href="Base.html#M001547">attributes</a> <a
href="Base.html#M001553">hash</a> such that associations are still
accessible, even on destroyed records.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001554-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001554-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1620</span>
1620:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
1621:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">freeze</span>; <span class="ruby-keyword kw">self</span>
1622:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001555" class="method-detail">
        <a name="M001555"></a>

        <div class="method-heading">
          <a href="#M001555" class="method-signature">
          <span class="method-name">frozen?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if the <a href="Base.html#M001547">attributes</a> <a
href="Base.html#M001553">hash</a> has been frozen.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001555-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001555-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1625</span>
1625:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frozen?</span>
1626:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
1627:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001542" class="method-detail">
        <a name="M001542"></a>

        <div class="method-heading">
          <a href="#M001542" class="method-signature">
          <span class="method-name">has_attribute?</span><span class="method-args">(attr_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the given attribute is in the <a
href="Base.html#M001547">attributes</a> <a
href="Base.html#M001553">hash</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001542-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001542-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1497</span>
1497:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
1498:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>)
1499:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001553" class="method-detail">
        <a name="M001553"></a>

        <div class="method-heading">
          <a href="#M001553" class="method-signature">
          <span class="method-name">hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delegates to id in order to allow two records of the same type and id to
work with something like:
</p>
<pre>
  [ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001553-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001553-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1615</span>
1615:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
1616:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
1617:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001539" class="method-detail">
        <a name="M001539"></a>

        <div class="method-heading">
          <a href="#M001539" class="method-signature">
          <span class="method-name">initialize_copy</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Cloned objects have no id assigned and are treated as <a
href="Base.html#M001538">new</a> records. Note that this is a
&quot;shallow&quot; clone as it copies the object&#8216;s <a
href="Base.html#M001547">attributes</a> only, not its associations. The
extent of a &quot;deep&quot; clone is application specific and is therefore
left to the application to implement according to its need.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001539-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001539-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1423</span>
1423:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)
1424:         <span class="ruby-identifier">_run_after_initialize_callbacks</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:_run_after_initialize_callbacks</span>)
1425:         <span class="ruby-identifier">cloned_attributes</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">clone_attributes</span>(<span class="ruby-identifier">:read_attribute_before_type_cast</span>)
1426:         <span class="ruby-identifier">cloned_attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>)
1427: 
1428:         <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">cloned_attributes</span>
1429: 
1430:         <span class="ruby-ivar">@changed_attributes</span> = {}
1431:         <span class="ruby-identifier">attributes_from_column_definition</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">orig_value</span><span class="ruby-operator">|</span>
1432:           <span class="ruby-ivar">@changed_attributes</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">orig_value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">field_changed?</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">orig_value</span>, <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">attr</span>])
1433:         <span class="ruby-keyword kw">end</span>
1434: 
1435:         <span class="ruby-identifier">clear_aggregation_cache</span>
1436:         <span class="ruby-identifier">clear_association_cache</span>
1437:         <span class="ruby-ivar">@attributes_cache</span> = {}
1438:         <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">true</span>
1439:         <span class="ruby-identifier">ensure_proper_type</span>
1440: 
1441:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:current_scoped_methods</span>)
1442:           <span class="ruby-identifier">create_with</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">scope_for_create</span>
1443:           <span class="ruby-identifier">create_with</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">att</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{att}=&quot;</span>, <span class="ruby-identifier">value</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">create_with</span>
1444:         <span class="ruby-keyword kw">end</span>
1445:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001559" class="method-detail">
        <a name="M001559"></a>

        <div class="method-heading">
          <a href="#M001559" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the contents of the record as a nicely formatted string.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001559-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001559-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1648</span>
1648:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
1649:         <span class="ruby-identifier">attributes_as_nice_string</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
1650:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">new_record?</span>
1651:             <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
1652:           <span class="ruby-keyword kw">end</span>
1653:         }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
1654:         <span class="ruby-node">&quot;#&lt;#{self.class} #{attributes_as_nice_string}&gt;&quot;</span>
1655:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001558" class="method-detail">
        <a name="M001558"></a>

        <div class="method-heading">
          <a href="#M001558" class="method-signature">
          <span class="method-name">readonly!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Marks this record as read only.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001558-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001558-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1643</span>
1643:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly!</span>
1644:         <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword kw">true</span>
1645:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001557" class="method-detail">
        <a name="M001557"></a>

        <div class="method-heading">
          <a href="#M001557" class="method-signature">
          <span class="method-name">readonly?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if the record is read only. Records loaded through
joins with piggy-back <a href="Base.html#M001547">attributes</a> will be
marked as read only since they cannot be saved.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001557-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001557-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1638</span>
1638:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly?</span>
1639:         <span class="ruby-ivar">@readonly</span>
1640:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001540" class="method-detail">
        <a name="M001540"></a>

        <div class="method-heading">
          <a href="#M001540" class="method-signature">
          <span class="method-name">to_param</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a String, which Action Pack uses for constructing an URL to this
object. The default implementation returns this record&#8216;s id as a
String, or nil if this record&#8216;s unsaved.
</p>
<p>
For example, suppose that you have a User model, and that you have a
<tt>resources :users</tt> route. Normally, <tt>user_path</tt> will
construct a path with the user object&#8216;s &#8216;id&#8217; in it:
</p>
<pre>
  user = User.find_by_name('Phusion')
  user_path(user)  # =&gt; &quot;/users/1&quot;
</pre>
<p>
You can override <tt><a href="Base.html#M001540">to_param</a></tt> in your
model to make <tt>user_path</tt> construct a path using the user&#8216;s
name instead of the user&#8216;s id:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def to_param  # overridden
      name
    end
  end

  user = User.find_by_name('Phusion')
  user_path(user)  # =&gt; &quot;/users/Phusion&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001540-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001540-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1469</span>
1469:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>
1470:         <span class="ruby-comment cmt"># We can't use alias_method here, because method 'id' optimizes itself on the fly.</span>
1471:         <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment cmt"># Be sure to stringify the id for routes</span>
1472:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M001561" class="method-detail">
        <a name="M001561"></a>

        <div class="method-heading">
          <a href="#M001561" class="method-signature">
          <span class="method-name">clone_attribute_value</span><span class="method-args">(reader_method, attribute_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001561-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001561-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1665</span>
1665:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clone_attribute_value</span>(<span class="ruby-identifier">reader_method</span>, <span class="ruby-identifier">attribute_name</span>)
1666:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">reader_method</span>, <span class="ruby-identifier">attribute_name</span>)
1667:         <span class="ruby-identifier">value</span>.<span class="ruby-identifier">duplicable?</span> <span class="ruby-value">? </span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">clone</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">value</span>
1668:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-constant">NoMethodError</span>
1669:         <span class="ruby-identifier">value</span>
1670:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001560" class="method-detail">
        <a name="M001560"></a>

        <div class="method-heading">
          <a href="#M001560" class="method-signature">
          <span class="method-name">clone_attributes</span><span class="method-args">(reader_method = :read_attribute, attributes = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001560-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001560-source">
<pre>
      <span class="ruby-comment cmt"># File /home/slavo/.rvm/gems/ree-1.8.7-2010.02/gems/activerecord-3.0.0/lib/active_record/base.rb, line 1658</span>
1658:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clone_attributes</span>(<span class="ruby-identifier">reader_method</span> = <span class="ruby-identifier">:read_attribute</span>, <span class="ruby-identifier">attributes</span> = {})
1659:         <span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
1660:           <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">clone_attribute_value</span>(<span class="ruby-identifier">reader_method</span>, <span class="ruby-identifier">name</span>)
1661:         <span class="ruby-keyword kw">end</span>
1662:         <span class="ruby-identifier">attributes</span>
1663:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>